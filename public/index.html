<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ò—Å–ø—ã—Ç–∞–Ω–∏—è –•–æ–≥–≤–∞—Ä—Ç—Å–∞</title>

<style>
@font-face {
  font-family: 'HarryPotter';
  src: url('HarryP.ttf') format('truetype');
}

body {
  margin: 0;
  height: 100vh;
  font-family: 'HarryPotter', serif;
  color: #f5e6c8;
  display: flex;
  align-items: center;
  justify-content: center;
  background-size: cover;
  background-position: center;
  transition: background-image 1s ease-in-out;
  animation: candleFlicker 6s infinite;
  overflow: hidden;
}

/* üïØÔ∏è –ú–µ—Ä—Ü–∞–Ω–∏–µ —Å–≤–µ—á–µ–π */
@keyframes candleFlicker {
  0% { filter: brightness(0.95); }
  50% { filter: brightness(1.05); }
  100% { filter: brightness(0.95); }
}

/* ‚ú® –ú–∞–≥–∏—á–µ—Å–∫–∞—è –≤—Å–ø—ã—à–∫–∞ */
.flash {
  animation: flash 0.6s ease;
}
@keyframes flash {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.6); }
  100% { filter: brightness(1); }
}

/* ‚ùå –û—à–∏–±–∫–∞ */
.shake {
  animation: shake 0.4s;
}
@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-6px); }
  50% { transform: translateX(6px); }
  75% { transform: translateX(-6px); }
  100% { transform: translateX(0); }
}

.game {
  width: 720px;
  background: rgba(30,30,50,0.85);
  border: 3px solid #d4af37;
  border-radius: 18px;
  padding: 40px;
  text-align: center;
  box-shadow: 0 0 45px rgba(212,175,55,0.6);
}

h2 {
  font-size: 34px;
  color: #f4c542;
  text-shadow: 0 0 10px rgba(255,215,120,0.9);
  min-height: 120px;
}

input {
  margin-top: 20px;
  padding: 12px;
  width: 85%;
  font-size: 18px;
  border-radius: 8px;
  border: 2px solid #d4af37;
  background: #151525;
  color: #f5e6c8;
  font-family: 'HarryPotter', serif;
}

button {
  margin-top: 25px;
  padding: 14px 40px;
  background: #d4af37;
  border: none;
  font-size: 18px;
  cursor: pointer;
  border-radius: 10px;
  color: #1b1b2f;
  font-family: 'HarryPotter', serif;
  transition: transform .2s, box-shadow .2s;
}
button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(212,175,55,0.9);
}

.info {
  margin-top: 25px;
  font-size: 20px;
  color: #7CFC98;
}

/* üå´Ô∏è –ß–∞—Å—Ç–∏—Ü—ã */
.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: rgba(255,215,120,0.6);
  border-radius: 50%;
  animation: float 8s linear infinite;
}
@keyframes float {
  from { transform: translateY(100vh); opacity: 1; }
  to { transform: translateY(-10vh); opacity: 0; }
}

/* –ú–æ–¥–∞–ª–∫–∏ */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: none;
  align-items: center;
  justify-content: center;
}
.modal-box {
  background: #1f1f2e;
  border: 3px solid #d4af37;
  padding: 35px;
  border-radius: 15px;
  text-align: center;
  box-shadow: 0 0 25px rgba(212,175,55,0.7);
}
</style>
</head>

<body>

<!-- –ß–∞—Å—Ç–∏—Ü—ã -->
<script>
for(let i=0;i<25;i++){
  const p=document.createElement('div');
  p.className='particle';
  p.style.left=Math.random()*100+'vw';
  p.style.animationDelay=Math.random()*8+'s';
  document.body.appendChild(p);
}
</script>

<!-- –°—Ç–∞—Ä—Ç -->
<div class="modal" id="startScreen" style="display:flex;">
  <div class="modal-box">
    <h2>ü™Ñ –ò—Å–ø—ã—Ç–∞–Ω–∏—è –•–æ–≥–≤–∞—Ä—Ç—Å–∞ ü™Ñ</h2>
    <button onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
  </div>
</div>

<div class="game" id="gameBox">
  <h2 id="question"></h2>
  <input id="answer" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç">
  <br>
  <button onclick="checkAnswer()">–ü—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ</button>
  <div class="info" id="info"></div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∏ -->
<div class="modal" id="part1"><div class="modal-box"><h2>‚ú® –ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–π–¥–µ–Ω–∞ ‚ú®</h2><button onclick="showInfo1()">–ü–æ–ª—É—á–∏—Ç—å</button></div></div>
<div class="modal" id="info1"><div class="modal-box"><h2>–ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</h2><p>100</p><button onclick="continueGame()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button></div></div>
<div class="modal" id="info2"><div class="modal-box"><h2>–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</h2><p>200</p><button onclick="endGame()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button></div></div>

<audio id="bgMusic" src="background-music.mp3" loop></audio>
<audio id="success" src="spell.mp3"></audio>
<audio id="fail" src="fail.mp3"></audio>

<script>
const puzzles=[
"–Ø –æ—Ç–∫—Ä—ã–≤–∞—é –ø—É—Ç—å —Ç—É–¥–∞, –∫—É–¥–∞ –Ω–µ–ª—å–∑—è –≤–æ–π—Ç–∏ —Å–∏–ª–æ–π. –ë–µ–∑ –º–µ–Ω—è —Ç–∞–π–Ω–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –∑–∞–ø–µ—Ä—Ç–æ–π. –ö—Ç–æ —è?",
"–Ø –≥–æ–≤–æ—Ä—é –±–µ–∑ –≥–æ–ª–æ—Å–∞ –∏ –æ—Ç–≤–µ—á–∞—é –±–µ–∑ —Å–ª–æ–≤. –í —Å—Ç–µ–Ω–∞—Ö –∑–∞–º–∫–∞ –º–µ–Ω—è —Å–ª—ã—à–∞—Ç —á–∞—Å—Ç–æ. –ß—Ç–æ —è?",
"–ú–µ–Ω—è –º–æ–∂–Ω–æ –¥–∞—Ç—å, –Ω–æ –Ω–µ–ª—å–∑—è –∑–∞–±—Ä–∞—Ç—å –Ω–∞–∑–∞–¥. –ß—Ç–æ —ç—Ç–æ?",
"–Ø —Å—É—â–µ—Å—Ç–≤—É—é, –ø–æ–∫–∞ –≤ –º–µ–Ω—è –≤–µ—Ä—è—Ç. –ö—Ç–æ —è?",
"–Ø –ø—Ä–∏–Ω–∞–¥–ª–µ–∂—É —Ç–µ–±–µ —Å —Ä–æ–∂–¥–µ–Ω–∏—è. –ß—Ç–æ —ç—Ç–æ?",
"–Ø –±–µ–≥—É –±—ã—Å—Ç—Ä–µ–µ –ª—é–±–æ–≥–æ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è. –ß—Ç–æ —è?",
"–Ø –º–æ–≥—É –∑–∞—â–∏—Ç–∏—Ç—å –∏–ª–∏ –ø–æ–≥—É–±–∏—Ç—å. –ß—Ç–æ —ç—Ç–æ?",
"–ú–µ–Ω—è –±–æ—è—Ç—Å—è –Ω–∞–∑—ã–≤–∞—Ç—å. –ö—Ç–æ —è?",
"–ú–µ–Ω—è –Ω–µ–ª—å–∑—è —É–≤–∏–¥–µ—Ç—å, –Ω–æ —è —Å–∏–ª—å–Ω–µ–µ –º–∞–≥–∏–∏. –ß—Ç–æ —ç—Ç–æ?",
"–Ø –æ—Å—Ç–∞—é—Å—å, –∫–æ–≥–¥–∞ –≤—Å—ë –ø–æ—Ç–µ—Ä—è–Ω–æ. –ß—Ç–æ —ç—Ç–æ?"
];
const answers=["–∫–ª—é—á","—ç—Ö–æ","–æ–±–µ—â–∞–Ω–∏–µ","–Ω–∞–¥–µ–∂–¥–∞","–∏–º—è","–≤—Ä–µ–º—è","–≤—ã–±–æ—Ä","—Å—Ç—Ä–∞—Ö","–ª—é–±–æ–≤—å","–ø–∞–º—è—Ç—å"];
let i=0;

function setBg(){document.body.style.backgroundImage=`url('bg${i+1}.jpg')`;}

function typeText(el,text){
  el.innerHTML="";
  let idx=0;
  const t=setInterval(()=>{
    el.innerHTML+=text[idx++];
    if(idx>=text.length) clearInterval(t);
  },35);
}

function startGame(){
  document.getElementById("startScreen").style.display="none";
  bgMusic.volume=0.3; bgMusic.play();
  showPuzzle();
}

function showPuzzle(){
  setBg();
  typeText(question,puzzles[i]);
  info.innerText="";
  answer.value="";
}

function checkAnswer(){
  if(answer.value.trim().toLowerCase()===answers[i]){
    success.play();
    gameBox.classList.add("flash");
    setTimeout(()=>gameBox.classList.remove("flash"),600);
    i++;
    if(i===5){part1.style.display="flex";return;}
    if(i===10){info2.style.display="flex";return;}
    showPuzzle();
  }else{
    fail.play();
    gameBox.classList.add("shake");
    setTimeout(()=>gameBox.classList.remove("shake"),400);
    info.innerText="–ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ...";
  }
}

function showInfo1(){part1.style.display="none";info1.style.display="flex";}
function continueGame(){info1.style.display="none";showPuzzle();}
function endGame(){info2.style.display="none";info.innerText="ü™Ñ –ò—Å–ø—ã—Ç–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã ü™Ñ";}
</script>

</body>
</html>
